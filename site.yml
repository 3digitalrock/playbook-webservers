---
# This playbook deploys the whole application stack in this site.

# Apply common configuration to all hosts
- hosts: tag_test_true
  user: ubuntu
  roles:
  - common

# Configure and deploy the API server(s)
- hosts: tag_testapi_true
  user: ubuntu
  roles:
  - nginx
  - nodejs
  - api

# Configure and deploy the web server(s)
- hosts: tag_testweb
  user: ubuntu
  roles:
  - nginx
  - nodejs
  - web

# Configure and deploy the web server(s)
- hosts: tag_testdb_true
  user: ubuntu
  roles:
  - db
